apiVersion: v1
kind: ConfigMap
metadata:
  name: icarus-concurrency-config
  namespace: default
  labels:
    app: icarus-processor
data:
  # Concurrency multiplier for calculating max concurrent goroutines
  # Calculated as: CPU_LIMIT Ã— MULTIPLIER
  # Conservative default (2) for production stability
  # Increase to 3-4 for I/O-bound workloads
  ICARUS_CONCURRENCY_MULTIPLIER: "2"
  
  # Number of worker goroutines in the runner's message processing pool
  # This is separate from the limiter and controls NATS message consumers
  # Default: max(CPU, 4) - ensures minimum of 4 workers
  ICARUS_RUNNER_WORKERS: "4"
  
  # Processor mode: concurrent or sequential
  # concurrent: Process embedded nodes at the same depth level in parallel
  # sequential: Process all embedded nodes one by one
  # Default: concurrent (better performance for independent nodes)
  ICARUS_PROCESSOR_MODE: "concurrent"
  
  # Iterator mode: parallel or sequential
  # parallel: Process array items concurrently with worker pool
  # sequential: Process array items one by one (more predictable)
  # Default: sequential (safer for resource-constrained environments)
  ICARUS_ITERATOR_MODE: "sequential"
